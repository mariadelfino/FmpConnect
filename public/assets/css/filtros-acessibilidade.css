/* Filtros de Acessibilidade - Otimizados */

/* ========================================
   Otimização de Performance para Filtros
   ======================================== */

/* Isola os efeitos dos filtros para melhor performance */
body.filtro-protanopia,
body.filtro-deuteranopia,
body.filtro-tritanopia,
body.alto-contraste {
    isolation: isolate;
    contain: layout style;
}

/* OTIMIZAÇÃO CRÍTICA: Remove efeitos pesados quando filtros estão ativos */
body.filtros-ativos * {
    /* Remove todos os box-shadows (pesam MUITO com filtros SVG) */
    box-shadow: none !important;
    text-shadow: none !important;
    
    /* Simplifica transições */
    transition-duration: 0.15s !important;
}

/* Exceção: Mantém hover/focus mínimo para acessibilidade */
body.filtros-ativos button:hover,
body.filtros-ativos a:hover,
body.filtros-ativos button:focus,
body.filtros-ativos a:focus {
    outline: 2px solid var(--cor-principal) !important;
    outline-offset: 2px;
}

/* Mantém logos de patrocinadores SEM filtro (são imagens estáticas) */
.secao-patrocinadores,
.secao-patrocinadores *,
.marquee,
.marquee *,
.marquee_track,
.marquee_track * {
    filter: none !important;
    -webkit-filter: none !important;
}

/* ========================================
   Filtros de Daltonismo - GPU Acelerados
   ======================================== */

/* Protanopia (Deficiência de vermelho) - Otimizado */
.filtro-protanopia {
    filter: url('#protanopia-filter');
    -webkit-filter: url('#protanopia-filter');
    will-change: filter;
    transform: translateZ(0); /* Força aceleração GPU */
}

/* Deuteranopia (Deficiência de verde) - Otimizado */
.filtro-deuteranopia {
    filter: url('#deuteranopia-filter');
    -webkit-filter: url('#deuteranopia-filter');
    will-change: filter;
    transform: translateZ(0); /* Força aceleração GPU */
}

/* Tritanopia (Deficiência de azul) - Otimizado */
.filtro-tritanopia {
    filter: url('#tritanopia-filter');
    -webkit-filter: url('#tritanopia-filter');
    will-change: filter;
    transform: translateZ(0); /* Força aceleração GPU */
}

/* ========================================
   Alto Contraste - Otimizado
   ======================================== */

.alto-contraste {
    filter: contrast(1.25) brightness(1.08);
    -webkit-filter: contrast(1.25) brightness(1.08);
    will-change: filter;
    transform: translateZ(0); /* Força aceleração GPU */
}

/* Fallback para navegadores sem suporte a filtros SVG */
@supports not (filter: url('#protanopia-filter')) {
    .filtro-protanopia {
        filter: grayscale(0.4) sepia(0.25) hue-rotate(-15deg) saturate(1.1);
    }
    
    .filtro-deuteranopia {
        filter: grayscale(0.35) sepia(0.3) hue-rotate(20deg) saturate(0.9);
    }
    
    .filtro-tritanopia {
        filter: grayscale(0.25) sepia(0.2) hue-rotate(-30deg) saturate(1.15);
    }
}

/* ========================================
   Otimizações Adicionais de Performance
   ======================================== */

/* Desativa blur (extremamente pesado) */
body.filtros-ativos *[style*="blur"],
body.filtros-ativos .blur {
    filter: none !important;
    backdrop-filter: none !important;
}


/* Remove animações complexas */
body.filtros-ativos *[class*="animate"],
body.filtros-ativos .animation {
    animation: none !important;
}

/* Mantém apenas animações essenciais (loading, etc) */
body.filtros-ativos .spinner,
body.filtros-ativos .loading,
body.filtros-ativos [aria-busy="true"] {
    animation: revert !important;
}

/* ========================================
   Filtros SVG (precisam ser injetados no HTML)
   ======================================== */

/* Os filtros SVG devem ser adicionados ao HTML como:
<svg style="position: absolute; width: 0; height: 0;" aria-hidden="true">
    <defs>
        <!-- Protanopia -->
        <filter id="protanopia-filter">
            <feColorMatrix type="matrix" values="
                0.567, 0.433, 0,     0, 0
                0.558, 0.442, 0,     0, 0
                0,     0.242, 0.758, 0, 0
                0,     0,     0,     1, 0"/>
        </filter>
        
        <!-- Deuteranopia -->
        <filter id="deuteranopia-filter">
            <feColorMatrix type="matrix" values="
                0.625, 0.375, 0,   0, 0
                0.7,   0.3,   0,   0, 0
                0,     0.3,   0.7, 0, 0
                0,     0,     0,   1, 0"/>
        </filter>
        
        <!-- Tritanopia -->
        <filter id="tritanopia-filter">
            <feColorMatrix type="matrix" values="
                0.95, 0.05,  0,     0, 0
                0,    0.433, 0.567, 0, 0
                0,    0.475, 0.525, 0, 0
                0,    0,     0,     1, 0"/>
        </filter>
    </defs>
</svg>
*/
